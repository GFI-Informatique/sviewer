<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
  <head>
    <title>geOrchestra sviewer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=100" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
    <!-- external libraries -->
    <script type="text/javascript" src="lib/jquery/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="lib/qrcode.js/qrcode.min.js"></script>
    <!-- OpenLayers -->
    <link rel="stylesheet" href="lib/ol/build/ol.css" type="text/css" />
    <script src="lib/ol/build/ol-whitespace.js" type="text/javascript"></script>
    <!-- jquery mobile -->
    <script type="text/javascript">
//<![CDATA[
var customConfig = {};
$(document).bind("mobileinit", function(){
    $.mobile.hashListeningEnabled = false;
    $.mobile.loader.prototype.options.text = "loading";
    $.mobile.loader.prototype.options.textVisible = false;
    $.mobile.loader.prototype.options.theme = "a";
    $.mobile.loader.prototype.options.html = "";
    $.mobile.activeBtnClass = 'unused';
});
//]]>
</script>
    <link rel="stylesheet" href="lib/jquery/jquery.mobile-1.3.2.min.css" />
    <script src="lib/jquery/jquery.mobile-1.3.2.min.js"></script>
    <link rel="stylesheet" href="css/jqm-icon-pack-2.0-original.css" />
    <!-- local -->
    <link rel="stylesheet" href="css/sviewer.css" type="text/css" />
    <script src="js/sviewer.js" type="text/javascript"></script>
    <script src="etc/customConfig.js" type="text/javascript"></script>

    <script type="text/javascript">
//<![CDATA[
            $(document).ready(function() {
                // fix height of content to allow for header
                function fixContentHeight() {
                    var header = $("#header");
                    var content = $("#frameMap");
                    var viewHeight = $(window).height();

                    var contentHeight = viewHeight - header.outerHeight();
                    if ((content.outerHeight() + header.outerHeight()) !== viewHeight) {
                        contentHeight -= (content.outerHeight() - content.height());
                        content.height(contentHeight);
                    }
                    if (window.map) {
                        map.updateSize();
                    } else {
                        initmap();
                    }
                }
                $(window).bind("orientationchange resize pageshow", fixContentHeight);
                fixContentHeight();
            });
//]]>
</script>
  </head>
  <body>
    <div data-role="page">
      <!-- header -->
      <div data-role="header" id="header" class="ui-bar-b">
        <h2 id="title"></h2>
        <div id="panelBtn" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
          <a href="#panelQuery" id="#panelQueryBtn" data-rel="popup" data-role="button" data-position-to="window" data-mini="true" data-icon="question" data-iconpos="notext">
          Interroger</a>
          <a href="#panelInfo" id="#panelInfoBtn" data-rel="popup" data-role="button" data-position-to="window" data-mini="true" data-icon="page" data-iconpos="notext">
          Comprendre</a>
          <a href="#panelLocate" id="#panelLocateBtn" data-rel="popup" data-role="button" data-position-to="window" data-mini="true" data-icon="search" data-iconpos="notext">Localiser</a>
          <a href="#panelShare" id="#panelShareBtn" data-rel="popup" data-role="button" data-position-to="window" data-mini="true" data-icon="link" data-iconpos="notext">
          Partager</a>
        </div>
      </div>
      <!-- content -->
      <div data-role="content" id="frameMap">
        <!-- map -->
        <div id="map" tabindex="0">
            <div id="marker"></div>
        </div>
        <!-- map controls -->
        <div id="mapcontrols">
          <a id="zeBt" href="#" accesskey="i" data-role="button" data-iconpos="notext" data-icon="home" data-theme="b">vue initiale</a>
          <a id="ziBt" href="#" accesskey="p" data-role="button" data-iconpos="notext" data-icon="plus" data-theme="b">zoom +</a>
          <a id="zoBt" href="#" accesskey="m" data-role="button" data-iconpos="notext" data-icon="minus" data-theme="b">zoom -</a>
          <a id="bgBt" href="#" accesskey="f" data-role="button" data-iconpos="notext" data-icon="arrow-r" data-theme="b">fond de plan</a>
        </div>
      </div>
      <!-- getfeatureinfo panel -->
      <div id="panelQuery" class="popupPanel" data-role="popup" data-corners="false" data-shadow="false">
        <div data-role="header" data-theme="c">
          <h3 class="i18n">Interroger</h3>
          <a href="#" data-rel="back" data-role="button" data-mini="true" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Fermer</a>
        </div>
          <div data-role="content">
            <div id="querycontent">
            Cliquez ou touchez la carte pour l'interroger
            </div>
          </div>
      </div>
      <!-- info panel -->
      <div id="panelInfo" class="popupPanel" data-role="popup" data-corners="false" data-shadow="false">
        <div data-role="header" data-theme="c">
          <h3 class="i18n">Comprendre</h3>
          <a href="#" data-rel="back" data-role="button" data-mini="true" data-icon="delete" data-iconpos="notext" class="ui-btn-right" data-shadow="false">Fermer</a>
        </div>
        <div data-role="content">
          <div id="legend"></div>
          <div id="baseAttributions"></div>
        </div>
      </div>
      <!-- locate panel -->
      <div id="panelLocate" class="popupPanel" data-role="popup" data-corners="false" data-shadow="false">
        <div data-role="header" data-theme="c">
          <h3 class="i18n">Localiser</h3>
          <a href="#" data-rel="back" data-role="button" data-mini="true" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Fermer</a>
        </div>
        <div data-role="content">
          <form id="addressForm" method="POST" action="#">
            <label for="addressInput" class="ui-hidden-accessible">search for address or place</label>
            <input type="search" name="addressInput" id="addressInput" data-mini="true" data-inline="true" value="" placeholder="adresse et/ou commune"
            title="address or place" />
            <span id="locateMsg"></span>
            <div data-role="controlgroup" data-type="horizontal">
              <input type="submit" data-role="button" data-mini="true" data-inline="true" data-icon="search" value="Localiser" />
              <!--
              <input type="button" id="locateBtn" data-role="button" data-mini="true" data-icon="mappin" value="Where am I ?" />
              -->
            </div>
          </form>
        </div>
      </div>
      <!-- share panel -->
      <div id="panelShare" class="popupPanel" data-role="popup" data-corners="false" data-shadow="false">
        <div data-role="header" data-theme="c">
          <h3 class="i18n">Partager</h3>
          <a href="#" data-rel="back" data-role="button" data-mini="true" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Fermer</a>
        </div>
        <div data-role="content">
          <label for="setTitle" class="ui-hidden-accessible">Title</label>
          <input type="text" name="setTitle" id="setTitle" data-mini="true" value="" placeholder="titre de cette carte"/>
          <div class="ui-grid-a">
            <div class="ui-block-a">
              <!-- permalink -->
              <a data-role="button" id="permalink" data-ajax="false" href="#" data-mini="true" data-iconpos="right">Permalien</a>
              <!-- social links -->
              <span id="socialLinks"></span>
              <!-- to georchestra viewer -->
              <form id="georchestraForm" target="_blank" method="post" action="http://geobretagne.fr/mapfishapp/">
                <input type="hidden" id="georchestraFormData" name="data" value="" />
                <input type="submit" data-role="button" data-mini="true" data-iconpos="right" value="geOrchestra" />
              </form>
            </div>
            <!-- QQR code -->
            <div class="ui-block-b">
              <div id="qrcode"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- end page -->
    </div>
  </body>
</html>
